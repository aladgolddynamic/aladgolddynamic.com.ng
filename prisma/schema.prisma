// Prisma schema for Aladgold Dynamic CMS
// Database: SQLite for development, PostgreSQL for production

generator client {
  provider = "prisma-client-js"
}

datasource db {
  provider = "sqlite"
  url      = "file:./dev.db"
}

// Admin Users
model User {
  id        String   @id @default(cuid())
  email     String   @unique
  password  String   // Hashed with bcrypt
  name      String
  role      String   @default("CONTENT_EDITOR")
  createdAt DateTime @default(now())
  updatedAt DateTime @updatedAt
}



// Company Profile (Single row)
model CompanyProfile {
  id              String   @id @default(cuid())
  name            String   @default("Aladgold Dynamic Company Limited")
  logo            String?
  heroTitle       String
  heroSubtitle    String
  heroImage       String?
  aboutContent    String   @default("")
  footerExcerpt   String?
  mission         String
  vision          String
  values          String   // JSON string
  address         String
  phone           String
  phone2          String?
  email           String
  facebook        String?
  twitter         String?
  instagram       String?
  linkedin        String?
  socialLinks     String?  // Alt: JSON string
  updatedAt       DateTime @updatedAt
}

// Services
model Service {
  id           String   @id @default(cuid())
  title        String
  description  String
  icon         String   // Icon name from lucide-react
  color        String   // Tailwind color class
  category     String   @default("engineering") // engineering or consultancy
  capabilities String   // JSON array of capabilities
  featured     Boolean  @default(false)
  order        Int      @default(0)
  createdAt    DateTime @default(now())
  updatedAt    DateTime @updatedAt
}

// Projects / Portfolio
model Project {
  id          String        @id @default(cuid())
  title       String
  category    String
  client      String
  location    String
  year        String?
  budget      String?
  status      String        @default("COMPLETED")
  description String
  scope       String?       // JSON array of scope items
  image       String?
  featured    Boolean       @default(false)
  createdAt   DateTime      @default(now())
  updatedAt   DateTime      @updatedAt
}



// News & Announcements
model NewsPost {
  id          String   @id @default(cuid())
  title       String
  slug        String   @unique
  excerpt     String
  content     String   // Rich text / Markdown
  image       String?
  category    String   @default("General")
  authorName  String?  @default("Aladgold Team")
  published   Boolean  @default(false)
  publishedAt DateTime?
  createdAt   DateTime @default(now())
  updatedAt   DateTime @updatedAt
}

// Team Members
model TeamMember {
  id        String   @id @default(cuid())
  name      String
  role      String
  bio       String
  image     String?
  order     Int      @default(0)
  visible   Boolean  @default(true)
  email     String?  @unique
  createdAt DateTime @default(now())
  updatedAt DateTime @updatedAt
}

// Jobs / Careers
model Job {
  id           String    @id @default(cuid())
  title        String
  description  String
  requirements String    // JSON array or text
  location     String
  type         String    // Full-time, Part-time, Contract
  status       String    @default("OPEN")
  pageSlug     String    @default("careers") // Target page for this job
  createdAt    DateTime  @default(now())
  updatedAt    DateTime  @updatedAt
}



// Contact Form Submissions
model ContactSubmission {
  id           String            @id @default(cuid())
  name         String
  email        String
  phone        String
  organization String?
  message      String
  status       String            @default("NEW")
  createdAt    DateTime          @default(now())
  updatedAt    DateTime          @updatedAt
}



// Navigation Items
model NavigationItem {
  id      String  @id @default(cuid())
  label   String
  href    String
  order   Int     @default(0)
  type    String  @default("header") // e.g. "header" or "footer"
  visible Boolean @default(true)

  @@unique([label, type])
}

// Site Settings
model SiteSettings {
  id                      String   @id @default(cuid())
  siteName                String
  siteDescription         String
  metaKeywords            String   // Comma-separated
  enableNewsSection       Boolean  @default(true)
  enableCareersSection    Boolean  @default(true)
  spontaneousApplications Boolean  @default(true)
  updatedAt               DateTime @updatedAt
}

// Newsletter Subscriptions
model Newsletter {
  id        String   @id @default(cuid())
  email     String   @unique
  createdAt DateTime @default(now())
}
